# 算法错误

#### [1004. 最大连续1的个数 III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/)

输入:

[0,0,0,1] 4

输出

0

预期结果

4

```c++
class Solution {
public:
    int longestOnes(vector<int>& A, int K) {
        int res = 0;
        for(int i = 0, j = 0; i < A.size(); ++i)
        {
            if(A[i] == 0)
            {
                if(K > 0) --K;
                else
                {
                    // 记录上一次的结果
                    res = max(res, i-j);
                    while(A[j++] == 1); // 把j++到第一个不是1的下一个位置
                }
            }
        }
        return res;
    }
};
```

改正：

```c++
class Solution {
public:
    int longestOnes(vector<int>& A, int K) {
        int i = 0, j = 0, res = 0;
        for(; i < A.size(); ++i)
        {
            if(A[i] == 0)
            {
                if(K > 0) --K;
                else
                {
                    // 记录上一次的结果
                    res = max(res, i-j);
                    while(A[j++] == 1); // 把j++到第一个不是1的下一个位置
                }
            }
        }
        return max(res, i-j);
    }
};
```

```c++
class Solution {
public:
    int longestSubarray(vector<int>& nums, int limit) {
        // dp[i]: 以i结尾的(最长子序列长度，最大值，最小值)
        if(nums.size() == 0) return 0;
        vector<vector<int> > dp(nums.size(), vector<int>(3, 0));
        dp[0][0] = 1; dp[0][1] = dp[0][2] = nums[0];
        int Max = 1;
        for(int i = 1; i < dp.size(); ++i){
            if(nums[i] < dp[i-1][2] && dp[i-1][1] - nums[i] <= limit)  // 小于最小值
            { dp[i][0] = dp[i-1][0]+1; dp[i][1] = dp[i][1]; dp[i][2] = nums[i]; }
            else if(nums[i] > dp[i-1][1] && nums[i] - dp[i-1][2] <= limit) // 大于最大值
            { dp[i][0] = dp[i-1][0]+1; dp[i][1] = nums[i]; dp[i][2] = dp[i-1][2]; }
            else if(nums[i] >= dp[i-1][2] && nums[i] <= dp[i-1][1])
            { dp[i] = dp[i-1]; dp[i][0]++; }
            else
            { dp[i][0] = 1; dp[i][1] = dp[i][2] = nums[i]; }
            Max = max(Max, dp[i][0]);
        }
        return Max;
    }
};
```

